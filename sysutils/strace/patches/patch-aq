$NetBSD: patch-aq,v 1.2 2007/04/27 19:45:02 christos Exp $

--- signal.c.orig	2006-01-12 17:34:50.000000000 -0500
+++ signal.c	2007-04-27 11:31:51.000000000 -0400
@@ -36,12 +36,27 @@
 #include "defs.h"
 
 #include <signal.h>
+#include <sys/param.h>
 #include <sys/user.h>
 #include <fcntl.h>
 
-#ifdef SVR4
+#if defined(SVR4) || defined(NETBSD)
 #include <sys/ucontext.h>
 #endif /* SVR4 */
+#ifdef NETBSD
+#if !defined(UC_CPU) && defined(_UC_CPU)
+#define UC_CPU _UC_CPU
+#endif
+#if !defined(UC_SIGMASK) && defined(_UC_SIGMASK)
+#define UC_SIGMASK _UC_SIGMASK
+#endif
+#if !defined(UC_STACK) && defined(_UC_STACK)
+#define UC_STACK _UC_STACK
+#endif
+#if !defined(UC_FPU) && defined(_UC_FPU)
+#define UC_FPU _UC_FPU
+#endif
+#endif
 
 #ifdef HAVE_SYS_REG_H
 # include <sys/reg.h>
@@ -1474,7 +1489,7 @@
 
 #endif /* LINUX */
 
-#if defined(SVR4) || defined(FREEBSD)
+#if defined(SVR4) || defined(ALLBSD)
 
 int
 sys_sigsuspend(tcp)
@@ -1506,7 +1521,7 @@
 #endif /* !FREEBSD */
 #endif /* SVR4 || FREEBSD */
 
-#if defined SVR4 || defined LINUX || defined FREEBSD
+#if defined SVR4 || defined LINUX || defined ALLBSD
 #if defined LINUX && !defined SS_ONSTACK
 #define SS_ONSTACK      1
 #define SS_DISABLE      2
@@ -1598,7 +1613,7 @@
 
 #endif /* SVR4 */
 
-#if defined(LINUX) || defined(FREEBSD)
+#if defined(LINUX) || defined(ALLBSD)
 
 static int
 print_stack_t(tcp, addr)
