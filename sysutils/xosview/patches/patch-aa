$NetBSD: patch-aa,v 1.11 2006/02/18 10:12:24 rillig Exp $

Status: applied upstream.

--- bsd/kernel.cc.orig	2003-10-13 21:53:17.000000000 -0400
+++ bsd/kernel.cc	2004-04-15 10:16:49.000000000 -0400
@@ -817,11 +817,11 @@
 #if defined(NETBSD_1_6A)
   // Use the new sysctl to do this for us.
   int mib[3] = {CTL_HW, HW_DISKSTATS, sizeof(struct disk_sysctl)};
-  size_t sysctl_size = NetBSD_N_Drives * sizeof(struct disk_sysctl);
+  size_t sysctl_sz = NetBSD_N_Drives * sizeof(struct disk_sysctl);
   struct disk_sysctl drive_stats[NetBSD_N_Drives];
 
   // Do the sysctl.
-  if (sysctl(mib, 3, drive_stats, &sysctl_size, NULL, 0) < 0) {
+  if (sysctl(mib, 3, drive_stats, &sysctl_sz, NULL, 0) < 0) {
     err(1, "sysctl hw.diskstats failed");
   }
 
