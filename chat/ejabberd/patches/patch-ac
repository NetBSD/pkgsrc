$NetBSD: patch-ac,v 1.1.1.1 2008/03/10 08:58:32 martti Exp $

Patch from Fabrice Colliot: support for multiple listeners on same port
number (eg IPv4 and IPv6 simultaneously).

--- src/ejabberd.cfg.example.orig	2008-01-16 12:33:27.000000000 +0200
+++ src/ejabberd.cfg.example	2008-02-14 15:25:12.000000000 +0200
@@ -106,7 +106,7 @@
 {listen,
  [
 
-  {5222, ejabberd_c2s, [
+  {1, 5222, ejabberd_c2s, [
 
 			%%
 			%% If TLS is compiled and you installed a SSL
@@ -123,14 +123,14 @@
   %%
   %% To enable the old SSL connection method in port 5223:
   %%
-  %%{5223, ejabberd_c2s, [
+  %%{2, 5223, ejabberd_c2s, [
   %%			{access, c2s},
   %%			{shaper, c2s_shaper},
   %%			{certfile, "/path/to/ssl.pem"}, tls,
   %%			{max_stanza_size, 65536}
   %%		       ]},
 
-  {5269, ejabberd_s2s_in, [
+  {3, 5269, ejabberd_s2s_in, [
 			   {shaper, s2s_shaper},
 			   {max_stanza_size, 131072}
 			  ]},
@@ -138,7 +138,7 @@
   %%
   %% ejabberd_service: Interact with external components (transports...)
   %%
-  %%{8888, ejabberd_service, [
+  %%{4, 8888, ejabberd_service, [
   %%			    {access, all}, 
   %%			    {shaper_rule, fast},
   %%			    {ip, {127, 0, 0, 1}},
@@ -147,7 +147,7 @@
   %%			    }
   %%			   ]},
 
-  {5280, ejabberd_http, [
+  {5, 5280, ejabberd_http, [
 			 http_poll, 
 			 web_admin
 			]}
