$NetBSD: patch-ab,v 1.8 2001/05/01 00:31:25 kei Exp $

--- main.c.orig	Fri Mar 23 11:14:58 2001
+++ main.c	Fri Mar 30 21:02:12 2001
@@ -1645,7 +1645,17 @@
 	shell = "/bin/sh";
     system(shell);
 #else				/* SIGSTOP */
+#ifdef SIGTSTP
+    signal(SIGTSTP, SIG_DFL);	/* just in case */
+    /*
+     * Note: If susp() was called from SIGTSTP handler,
+     * unblocking SIGTSTP would be required here.
+     * Currently not.
+     */
+    kill(0, SIGTSTP);	/* stop whole job, not a single process */
+#else
     kill((pid_t)0, SIGSTOP);
+#endif
 #endif				/* SIGSTOP */
     fmInit();
     displayBuffer(Currentbuf, B_FORCE_REDRAW);
