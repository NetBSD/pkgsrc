$NetBSD: patch-aa,v 1.3 2008/05/20 13:46:49 joerg Exp $

--- django/contrib/admin/views/decorators.py.orig	2007-10-26 21:21:34.000000000 +0200
+++ django/contrib/admin/views/decorators.py
@@ -3,6 +3,7 @@ from django.conf import settings
 from django.contrib.auth.models import User
 from django.contrib.auth import authenticate, login
 from django.shortcuts import render_to_response
+from django.utils.html import escape
 from django.utils.translation import gettext_lazy
 import base64, datetime, md5
 import cPickle as pickle
@@ -22,6 +23,7 @@ def _display_login_form(request, error_m
         post_data = _encode_post_data({})
     return render_to_response('admin/login.html', {
         'title': _('Log in'),
+        'app_path': escape(request.path),
         'app_path': request.path,
         'post_data': post_data,
         'error_message': error_message
