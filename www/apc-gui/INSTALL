#! /bin/sh
#
# $NetBSD: INSTALL,v 1.2 2001/11/05 07:47:48 jlam Exp $

PKGNAME=$1
STAGE=$2

CAT="@CAT@"
CHMOD="@CHMOD@"
CP="@CP@"
ECHO="@ECHO@"
MKDIR="@MKDIR@"
TR="@TR@"

APACHE_SYSCONFDIR=@APACHE_SYSCONFDIR@
APC_GUI_DIR=${PKG_PREFIX}/@APC_GUI_DIR@
SAMPLECONFDIR=${PKG_PREFIX}/share/examples/@PKGBASE@

CONFFILES=" \
	${SAMPLECONFDIR}/apc_gui.conf ${APACHE_SYSCONFDIR}/apc_gui.conf : \
	/dev/null ${APC_GUI_DIR}/apc_config_local.php \
	"

case ${STAGE} in
PRE-INSTALL)
	;;

POST-INSTALL)
	${MKDIR} ${APACHE_SYSCONFDIR}

	${ECHO} "Installing configuration files:"
	${ECHO} ${CONFFILES} | ${TR} ":" "\012" | while read SAMPLEFILE FILE
	do
		if [ -f ${FILE} ]
		then
			${ECHO} "    ${FILE} already exists"
		else
			${ECHO} "    ${FILE}"
			${CP} ${SAMPLEFILE} ${FILE}
			${CHMOD} 644 ${FILE}
		fi
	done
	${CAT} << EOF

===========================================================================
You may wish to customize the following files:

EOF
	${ECHO} ${CONFFILES} | ${TR} ":" "\012" | while read SAMPLEFILE FILE
	do
		${ECHO} "	${FILE}"
	done
	${CAT} << EOF
===========================================================================
EOF
	;;

*)
	${ECHO} "Unexpected argument: ${STAGE}"
	exit 1
	;;
esac
exit 0
