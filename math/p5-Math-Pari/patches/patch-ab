$NetBSD: patch-ab,v 1.3 2005/12/03 01:46:26 joerg Exp $

--- utils/Math/PariBuild.pm.orig	Sun Feb  1 10:30:06 2004
+++ utils/Math/PariBuild.pm
@@ -674,7 +674,7 @@ sub find_machine_architecture () {
 
   if ($os =~ /^hp/) {
     $machine = 'hppa';
-  } elsif ($os eq 'os2' or $os eq 'freebsd') {
+  } elsif ($os eq 'os2' or $os eq 'freebsd' or $os eq 'dragonfly') {
     $machine = 'ix86';
   } elsif (0 and $os =~ /win32/i and not $Config{gccversion}) {
     # Not needed with rename of kernel1.s to kernel1.c?
@@ -714,6 +714,24 @@ sub find_machine_architecture () {
     } elsif ((split ' ', $Config{myuname})[3] eq 'sun') {
       $machine = 'm86k';
     }
+  } elsif ($os eq 'netbsd') {
+    chomp($machine = `uname -p`);
+    if ($machine =~ 'arm.*') {
+        $machine='arm';
+    } elsif ($machine = 'i386') {
+        $machine='ix86';
+    } elsif ($machine =~ 'mips.*') {
+        $machine='mips';
+    } elsif ($machine = 'powerpc') {
+        $machine='ppc';
+    } elsif ($machine =~ 'sh3.*') {
+        $machine='sh3';
+    } elsif ($machine =~ 'sh5.*') {
+        $machine='sh5';
+    } elsif ($machine = 'sparc64') {
+        $machine='sparcv9';
+    } 
+    # these can be used verbatim: alpha amd64 m68k sparc vax
   }
 
   if ( $machine ne 'alpha'
