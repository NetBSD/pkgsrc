$NetBSD: patch-ab,v 1.9 2005/09/07 10:48:47 dmcmahill Exp $

--- configure.orig	2005-05-25 15:00:45.000000000 +0000
+++ configure
@@ -18903,8 +18903,8 @@ echo "$as_me: error: Unable to configure
   *-*-solaris*)
     # standard compilers
     CC=cc
-    CC_OPTIONS='-O -DNDEBUG -DSVR4 -DSYSV -Dsolaris'
-    CC_LDFLAGS=
+    CC_OPTIONS="${CFLAGS} -DNDEBUG -DSVR4 -DSYSV -Dsolaris"
+    CC_LDFLAGS="${LDFLAGS}"
     if test "$WITH_G77" != yes; then
       #AC_CHECK_PROG(F77,f77,yes,no)
       for ac_prog in f77 f90 f2c-f77
@@ -18958,9 +18958,9 @@ echo "$as_me: error: Unable to configure
     #FC="$F77"
     FC_OPTIONS=-O
     FC_OPTIONS_O0=
-    FC_LDFLAGS=
+    FC_LDFLAGS="${LDFLAGS}"
     LD=ld
-    LD_LDFLAGS=
+    LD_LDFLAGS="${LDFLAGS}"
     if test "$enable_debug" = yes; then
       CC_OPTIONS='-g -DSVR4 -DSYSV -Dsolaris'
       FC_OPTIONS=-g
@@ -18977,7 +18977,7 @@ echo "$as_me: error: Unable to configure
       FC=g77
       FC_OPTIONS=-O2
       FC_OPTIONS_O0=
-      FC_LDFLAGS='-t'
+      FC_LDFLAGS="${LDFLAGS} -t"
 #     for solaris 2.7 with gcc/g77 2.95.2, binutils 2.9
 #     the correct value should be
 #     FC_LDFLAGS='-t -Wl,-export-dynamic'
@@ -22591,7 +22591,7 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
    FC="$F77"
    FC_OPTIONS="${FFLAGS}"
    FC_OPTIONS_O0=`echo $FC_OPTIONS | sed 's/-O0-9*//g'`
-   FC_LDFLAGS="${LDLAGS} -Wl,-R${X11BASE}/lib"
+   FC_LDFLAGS="${LDFLAGS} -Wl,-R${X11BASE}/lib"
    FC_PICFLAGS='-fPIC'
    # check for --export-dynamic
    ac_save_LDFLAGS="$LDFLAGS"
@@ -25800,6 +25800,10 @@ CHK_TCL_MIN=$TCL_MINOR_VERSION
 TCL_LIB_OK=0
   echo "$as_me:$LINENO: checking for tcl library tcl$TCL_MAJOR_VERSION.$TCL_MINOR_VERSION" >&5
 echo $ECHO_N "checking for tcl library tcl$TCL_MAJOR_VERSION.$TCL_MINOR_VERSION... $ECHO_C" >&6
+if test -n "$TCL_CONFIG_SH" ; then  
+	. $TCL_CONFIG_SH
+fi    
+LDFLAGS="$LDFLAGS $TCL_LIBS" 
 dirs="$USER_TCL_LIB_PATH /lib /usr/lib /usr/lib/tcl /usr/lib/tcl8.* /shlib /shlib/tcl /shlib/tcl8.* /usr/shlib /shlib/tcl /usr//shlib/tcl8.* /usr/local/lib /usr/local/lib/tcl /usr/local/lib/tcl8.* /usr/local/shlib /usr/X11/lib/tcl /usr/X11/lib/tcl8.* /usr/lib/X11 /usr/lib/X11/tcl /usr/lib/X11/tcl8.* ../lib ../../lib  /usr/local/tcl /usr/tcl /usr/tcl/lib /usr/local/tcl/lib /sw/lib/ ."
 libexts="so so.1.0 sl dylib a"
 libnames="tcl$CHK_TCL_MAJ.$CHK_TCL_MIN tcl.$CHK_TCL_MAJ.$CHK_TCL_MIN tcl$CHK_TCL_MAJ$CHK_TCL_MIN tcl.$CHK_TCL_MAJ$CHK_TCL_MIN"
@@ -25966,7 +25970,7 @@ fi
 done
 
 			if test $TCL_LIB_OK = 1; then
-				TCLTK_LIBS=" $TCL_LIB $TCLTK_LIBS"
+				TCLTK_LIBS=" $TCL_LIB $TCL_LIBS $TCLTK_LIBS"
 				break;
 			fi
 		fi
@@ -26098,6 +26102,10 @@ TK_LIB_OK=0
 
 echo "$as_me:$LINENO: checking for tk library tk$TK_MAJOR_VERSION.$TK_MINOR_VERSION" >&5
 echo $ECHO_N "checking for tk library tk$TK_MAJOR_VERSION.$TK_MINOR_VERSION... $ECHO_C" >&6
+if test -n "$TK_CONFIG_SH" ; then  
+	. $TK_CONFIG_SH
+fi    
+LDFLAGS="$LDFLAGS $TK_LIBS" 
 dirs="$USER_TK_LIB_PATH /lib /usr/lib /usr/lib/tk /usr/lib/tk8.* /shlib /shlib/tk /shlib/tk8.* /usr/shlib /shlib/tk /usr/shlib/tk8.* /usr/local/lib /usr/local/lib/tk /usr/local/lib/tk8.* /usr/local/shlib /usr/X11/lib/tk /usr/X11/lib/tk8.*  /usr/lib/X11 /usr/lib/X11/tk /usr/lib/X11/tk8.* ../lib ../../lib /usr/tk /usr/local/tk /usr/local/tk/lib /usr/tk/lib /usr/local/tcl /usr/tcl /usr/local/tcl/lib /usr/tcl/lib /sw/lib "
 libexts="so so.1.0 sl dylib a"
 libnames="tk$CHK_TK_MAJ.$CHK_TK_MIN tk.$CHK_TK_MAJ.$CHK_TK_MIN tk$CHK_TK_MAJ$CHK_TK_MIN tk.$CHK_TK_MAJ$CHK_TK_MIN"
@@ -26292,7 +26300,7 @@ echo "$as_me: error: header file tk.h  h
         fi
 
   else
-        TCLTK_LIBS=$TK_LIB" $TCLTK_LIBS"
+        TCLTK_LIBS=" $TK_LIB $TCLTK_LIBS"
         WITH_TKSCI=1
   fi
 
@@ -26321,13 +26329,13 @@ case "$host" in
     ;;
 esac
 
-GETLIBTK=libtk$TK_MAJOR_VERSION.$TK_MINOR_VERSION.$SONAME
+GETLIBTK=libtk$TK_MAJOR_VERSION$TK_MINOR_VERSION.$SONAME
 
-case "$host" in
-  *-*-darwin*)
-  GETLIBTK=/sw/lib/libtk$TK_MAJOR_VERSION.$TK_MINOR_VERSION.dylib
-  ;;
-esac
+#case "$host" in
+#  *-*-darwin*)
+#  GETLIBTK=/sw/lib/libtk$TK_MAJOR_VERSION.$TK_MINOR_VERSION.dylib
+#  ;;
+#esac
 
 fi
 
