$NetBSD: patch-ag,v 1.1 2006/06/14 09:07:45 rillig Exp $

--- fracsubr.c.orig	2006-06-15 07:57:40.000000000 +0200
+++ fracsubr.c	2006-06-15 08:30:43.000000000 +0200
@@ -3,12 +3,15 @@ FRACSUBR.C contains subroutines which be
 FRACTALS.C, i.e. which are non-fractal-specific fractal engine subroutines.
 */
 
-#ifndef XFRACT
+#if !defined(USE_VARARGS)
 #include <stdarg.h>
-#include <sys/timeb.h>
 #else
 #include <varargs.h>
 #endif
+
+#ifndef XFRACT
+#include <sys/timeb.h>
+#endif
 #include <sys/types.h>
 #include <time.h>
   /* see Fractint.c for a description of the "include"  hierarchy */
@@ -1050,7 +1053,7 @@ static int _fastcall ratio_bad(double ac
 
    */
 
-#ifndef XFRACT
+#if !defined(USE_VARARGS)
 int put_resume(int len, ...)
 #else
 int put_resume(va_alist)
@@ -1065,7 +1068,7 @@ va_dcl
 
    if (resume_info == 0)
       return(-1);
-#ifndef XFRACT
+#if !defined(USE_VARARGS)
    va_start(arg_marker,len);
 #else
    va_start(arg_marker);
@@ -1101,7 +1104,7 @@ You will not be able to resume calculati
    return(0);
 }
 
-#ifndef XFRACT
+#if !defined(USE_VARARGS)
 int get_resume(int len, ...)
 #else
 int get_resume(va_alist)
@@ -1116,7 +1119,7 @@ va_dcl
 
    if (resume_info == 0)
       return(-1);
-#ifndef XFRACT
+#if !defined(USE_VARARGS)
    va_start(arg_marker,len);
 #else
    va_start(arg_marker);
