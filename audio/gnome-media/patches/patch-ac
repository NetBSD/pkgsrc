$NetBSD: patch-ac,v 1.3 2001/08/13 18:38:55 rh Exp $

--- gmix/gmix.c.orig	Mon Jun 11 19:50:47 2001
+++ gmix/gmix.c
@@ -55,7 +55,9 @@
 #ifdef ALSA
 #include <sys/asoundlib.h>
 #else
-#ifdef HAVE_LINUX_SOUNDCARD_H 
+#ifdef HAVE_SOUNDCARD_H
+#include <soundcard.h>
+#elif defined(HAVE_LINUX_SOUNDCARD_H)
 #include <linux/soundcard.h>
 #else 
 #include <machine/soundcard.h>
@@ -106,6 +108,13 @@
 GtkWidget *app;
 GtkWidget  *slidernotebook;
 
+#if !defined(HAVE_MIXER_INFO) && !defined(SOUND_MIXER_INFO)
+typedef struct {
+	char id[20];
+	char name[40];
+} mixer_info;
+#endif
+
 /* Menus */
 static GnomeUIInfo help_menu[] = {
 	GNOMEUIINFO_ITEM_STOCK(N_("Help"), NULL, help, GNOME_STOCK_PIXMAP_HELP),
@@ -538,12 +547,16 @@
 	/*
 	 * mixer-name
 	 */
+#ifdef HAVE_MIXER_INFO
 	res=ioctl(new_device->fd, SOUND_MIXER_INFO, &new_device->info);
 	if (res!=0) {
 		g_free(new_device);
 		return NULL;
 	}
 	if(!isalpha(new_device->info.name[0]))
+#else
+	g_snprintf(new_device->info.id, 31, "%d", num+1);
+#endif
 		g_snprintf(new_device->info.name, 31, "Card %d", num+1);
 	/* 
 	 * several bitmasks describing the mixer
