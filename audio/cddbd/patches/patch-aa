$NetBSD: patch-aa,v 1.2 1998/08/07 10:35:55 agc Exp $

--- install.sh.orig	Sat Dec 21 21:49:54 1996
+++ install.sh	Fri Apr 18 15:12:25 1997
@@ -37,11 +37,25 @@
 # Set up access defaults.
 DIRPERM=755
 FILEPERM=644
-BINPERM=6711
+if [ -z "$BINPERM" ]
+then
+	BINPERM=6711
+fi
 UMASK=022
 OWNER=`expr "$id" : '.*uid=.*(\(.*\)).*gid'`
 GROUP=`expr "$id" : '.*gid=[0-9]*(\([a-zA-Z0-9_]*\))'`
-BINOWNER=$OWNER
+if [ -z "$BINOWNER" ]
+then
+	BINOWNER=$OWNER
+fi
+if [ -z "$BINGROUP" ]
+then
+	BINGROUP=$GROUP
+fi
+if [ -z "$INSTALL" ]
+then
+	INSTALL=/usr/bin/install
+fi
 
 USERS=100
 LINES=1024
@@ -202,28 +216,12 @@
 			rm -f $2
 		fi
 
-		cp $1 $2
+		$INSTALL -c -m $3 -o $4 -g $5 $1 $2
 		if [ $? != 0 ]
 		then
 			logerr -n "Cannot install $2: file copy error."
 			return 1
 		fi
-
-		if [ -f $2 ]
-		then
-			if [ $3 != default ]
-			then
-				chmod $3 $2 2>/dev/null
-			fi
-			if [ $4 != default ]
-			then
-				chown $4 $2 2>/dev/null
-			fi
-			if [ $5 != default ]
-			then
-				chgrp $5 $2 2>/dev/null
-			fi
-		fi
 		return 0
 	else
 		$ECHO "\t$2 NOT installed"
@@ -624,7 +622,7 @@
 $ECHO "\nInstalling cddbd files..."
 
 # Binaries
-instfile cddbd ${BINDIR}/cddbd $BINPERM $BINOWNER $GROUP
+instfile cddbd ${BINDIR}/cddbd $BINPERM $BINOWNER $BINGROUP
 
 # Configuration files
 instfile access `cat .accessfile`/access $FPERM $OWNID $GRPID
