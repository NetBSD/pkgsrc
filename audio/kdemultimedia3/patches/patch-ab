$NetBSD: patch-ab,v 1.1.1.1.2.2 2002/06/23 18:38:00 jlam Exp $

--- kaboodle/Makefile.am.orig	Fri Jul 27 01:53:45 2001
+++ kaboodle/Makefile.am
@@ -2,7 +2,7 @@
 
 SUBDIRS = pics actions
 
-lib_LTLIBRARIES = libkaboodlepart.la kaboodle.la
+lib_LTLIBRARIES = libkaboodlepart.la libkaboodle_main.la kaboodle.la
 
 libkaboodlepart_la_SOURCES = conf.cpp \
 	controls.cpp \
@@ -15,25 +15,24 @@
 libkaboodlepart_la_LDFLAGS = $(KDE_RPATH) $(KDE_PLUGIN) $(all_libraries) 
 libkaboodlepart_la_LIBADD = $(LIB_KFILE) $(LIB_KPARTS) -lqtmcop -lkmedia2_idl -lsoundserver_idl -lartskde
 
-kaboodle_la_SOURCES = main.cpp \
+kaboodle_la_SOURCES = kaboodle_main.cpp
+kaboodle_la_LIBADD = libkaboodle_main.la
+kaboodle_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
+
+libkaboodle_main_la_SOURCES = main.cpp \
 		      kaboodleapp.cpp \
 		      userinterface.cpp
 
-kaboodle_la_LIBADD = libkaboodlepart.la
-kaboodle_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module -avoid-version
+libkaboodle_main_la_LIBADD = libkaboodlepart.la
+libkaboodle_main_la_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 bin_PROGRAMS = kaboodle
 
-kaboodle_LDADD = kaboodle.la
+kaboodle_LDADD = libkaboodle_main.la
 kaboodle_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-kaboodle_SOURCES = dummy.cpp
+kaboodle_SOURCES = kaboodle_main.cpp
 
 libkaboodlepart_la_METASOURCES = AUTO
-
-CLEANFILES = dummy.cpp
-
-dummy.cpp:
-	echo > dummy.cpp
 
 applnk_DATA = kaboodle.desktop
 applnkdir = $(kde_appsdir)/Multimedia
