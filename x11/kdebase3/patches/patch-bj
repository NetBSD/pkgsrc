$NetBSD: patch-bj,v 1.2 2002/08/25 19:23:39 jlam Exp $

--- kicker/Makefile.am.orig	Wed May  8 19:21:48 2002
+++ kicker/Makefile.am
@@ -3,18 +3,22 @@
 SUBDIRS = share core ui buttons . proxy taskmanager taskbar applets extensions menuext data
 
 bin_PROGRAMS = kicker
-lib_LTLIBRARIES = kicker.la
+lib_LTLIBRARIES = libkicker_main.la kicker.la
 
 CLEANFILES = dummy.cpp
 
-kicker_la_LIBADD = core/libkicker_core.la  buttons/libkicker_buttons.la \
+libkicker_main_la_LIBADD = core/libkicker_core.la  buttons/libkicker_buttons.la \
 	ui/libkicker_ui.la share/libkickermain.la $(LIB_KIO) 
 
-kicker_la_SOURCES = dummy.cpp
-kicker_la_LDFLAGS = $(KDE_PLUGIN) -no-undefined -module $(all_libraries)
+libkicker_main_la_SOURCES = dummy.cpp
+libkicker_main_la_LDFLAGS = $(KDE_PLUGIN) $(all_libraries)
 
-kicker_LDADD = kicker.la
-kicker_SOURCES = dummy.cpp
+kicker_la_LIBADD = libkicker_main.la
+kicker_la_SOURCES = kicker_main.cpp
+kicker_la_LDFLAGS = -module -avoid-version $(all_libraries)
+
+kicker_LDADD = libkicker_main.la
+kicker_SOURCES = kicker_main.cpp
 kicker_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
 autostart_DATA = panel.desktop
