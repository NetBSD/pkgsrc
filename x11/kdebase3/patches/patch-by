$NetBSD: patch-by,v 1.2 2002/08/25 19:23:40 jlam Exp $

--- klipper/Makefile.am.orig	Fri Mar  1 09:59:20 2002
+++ klipper/Makefile.am
@@ -1,25 +1,26 @@
 INCLUDES= $(all_includes)
 
 bin_PROGRAMS = klipper
-lib_LTLIBRARIES = klipper.la
+lib_LTLIBRARIES = libklipper_main.la klipper.la
 kde_module_LTLIBRARIES = klipper_panelapplet.la
 
-CLEANFILES = dummy.cpp
+libklipper_main_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA) 
+libklipper_main_la_SOURCES = main.cpp toplevel.cpp urlgrabber.cpp configdialog.cpp toplevel.skel
 
-klipper_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA) 
-klipper_la_SOURCES = main.cpp toplevel.cpp urlgrabber.cpp configdialog.cpp toplevel.skel
+libklipper_main_la_METASOURCES = AUTO
+libklipper_main_la_LDFLAGS = $(all_libraries)
 
-klipper_la_METASOURCES = AUTO
+klipper_la_LIBADD = libklipper_main.la
+klipper_la_SOURCES = klipper_main.cpp
 klipper_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
-klipper_LDADD = klipper.la $(LIB_KSYCOCA)
-klipper_SOURCES = dummy.cpp
+klipper_LDADD = libklipper_main.la
+klipper_SOURCES = klipper_main.cpp
 klipper_LDFLAGS = $(all_libraries) $(KDE_RPATH)
 
-klipper_panelapplet_la_LIBADD = klipper.la
+klipper_panelapplet_la_LIBADD = libklipper_main.la
 klipper_panelapplet_la_SOURCES = applet.cpp
 klipper_panelapplet_la_LDFLAGS = $(all_libraries) -module -avoid-version
-
 
 appsdir = $(kde_appsdir)/Utilities
 apps_DATA = klipper.desktop
