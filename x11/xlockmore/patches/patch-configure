$NetBSD: patch-configure,v 1.2 2022/07/13 17:26:34 micha Exp $

Modify handling of LDFLAGS.
Rejected by upstream.

--- configure.orig	2022-07-11 01:00:43.000000000 +0000
+++ configure
@@ -11764,10 +11764,10 @@ printf "%s\n" "#define LESS_THAN_AIX3_2 
         dirname=`which gcc`
         dirname=`dirname $dirname`
         dirname=`dirname $dirname`/lib
-	if test "$dirname" != "/lib"; then
-  	    XLOCK_LDFLAGS="${XLOCK_LDFLAGS}:$dirname"
-  	    XMLOCK_LDFLAGS="${XMLOCK_LDFLAGS}:$dirname"
-	fi
+#	if test "$dirname" != "/lib"; then
+#	    XLOCK_LDFLAGS="${XLOCK_LDFLAGS}:$dirname"
+#	    XMLOCK_LDFLAGS="${XMLOCK_LDFLAGS}:$dirname"
+#	fi
     fi
     case "${canonical}" in
       *-*-freebsd* )
@@ -11822,6 +11822,8 @@ if test "x$ac_cv_header_elf_h" = xyes
 then :
 
 printf "%s\n" "#define HAVE_SHADOW 1" >>confdefs.h
+XLOCKLDFLAGS="${COMPILER_RPATH_FLAG}${XLOCK_LDFLAGS}"
+XMLOCKLDFLAGS="${COMPILER_RPATH_FLAG}${XMLOCK_LDFLAGS}"
 
 fi
 
@@ -11931,10 +11933,10 @@ printf "%s\n" "#define SVR4 1" >>confdef
         dirname=`which gcc`
         dirname=`dirname $dirname`
         dirname=`dirname $dirname`/lib
-	if test "$dirname" != "/lib"; then
-  	    XLOCK_LDFLAGS="${XLOCK_LDFLAGS}:$dirname"
-  	    XMLOCK_LDFLAGS="${XMLOCK_LDFLAGS}:$dirname"
-	fi
+#	if test "$dirname" != "/lib"; then
+#	    XLOCK_LDFLAGS="${XLOCK_LDFLAGS}:$dirname"
+#	    XMLOCK_LDFLAGS="${XMLOCK_LDFLAGS}:$dirname"
+#	fi
     fi
     XLOCKLDFLAGS="-R${XLOCK_LDFLAGS}"
     XMLOCKLDFLAGS="-R${XMLOCK_LDFLAGS}"
