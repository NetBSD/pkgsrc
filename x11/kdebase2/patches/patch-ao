$NetBSD: patch-ao,v 1.2 2001/10/15 22:46:00 skrll Exp $

--- kcontrol/kcontrol/Makefile.am.orig	Sun Jul 29 05:56:20 2001
+++ kcontrol/kcontrol/Makefile.am
@@ -22,41 +22,51 @@
 
 SUBDIRS = . pics
 
-CLEANFILES = dummy.cpp
-
 bin_PROGRAMS = kcontrol kcmshell kcminit
-kde_module_LTLIBRARIES = kcontrol.la kcmshell.la kcminit.la
+kde_module_LTLIBRARIES = libkcontrol_main.la kcontrol.la libkcmshell_main.la \
+	kcmshell.la libkcminit_main.la kcminit.la
 
-kcontrol_la_SOURCES = main.cpp toplevel.cpp indexwidget.cpp searchwidget.cpp \
+libkcontrol_main_la_SOURCES = main.cpp toplevel.cpp indexwidget.cpp searchwidget.cpp \
 	helpwidget.cpp moduleinfo.cpp utils.cpp modules.cpp proxywidget.cpp \
 	modloader.cpp dockcontainer.cpp aboutwidget.cpp global.cpp \
 	quickhelp.cpp moduletreeview.cpp moduleiconview.cpp \
 	kecdialog.cpp kcrootonly.cpp 
 
-kcontrol_la_LIBADD  = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcontrol_main_la_LIBADD  = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcontrol_main_la_LDFLAGS = $(all_libraries)
+
+kcontrol_la_SOURCES = kcontrol_main.cpp
+kcontrol_la_LIBADD  = libkcontrol_main.la
 kcontrol_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
-kcmshell_la_SOURCES = kcmshell.cpp moduleinfo.cpp modloader.cpp kecdialog.cpp \
+libkcmshell_main_la_SOURCES = kcmshell.cpp moduleinfo.cpp modloader.cpp kecdialog.cpp \
 			utils.cpp proxywidget.cpp kcdialog.cpp global.cpp \
 			kcdialog.skel
-kcmshell_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcmshell_main_la_LIBADD = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcmshell_main_la_LDFLAGS = $(all_libraries)
+
+kcmshell_la_SOURCES = kcmshell_main.cpp
+kcmshell_la_LIBADD = libkcmshell_main.la
 kcmshell_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
+libkcminit_main_la_SOURCES = kcminit.cpp global.cpp utils.cpp
+libkcminit_main_la_LIBADD   = $(LIB_KDEUI) $(LIB_KSYCOCA)
+libkcminit_main_la_LDFLAGS = $(all_libraries)
 
-kcminit_la_SOURCES = kcminit.cpp global.cpp utils.cpp
-kcminit_la_LIBADD   = $(LIB_KDEUI) $(LIB_KSYCOCA)
+kcminit_la_SOURCES = kcminit_main.cpp
+kcminit_la_LIBADD   = libkcminit_main.la
 kcminit_la_LDFLAGS = $(all_libraries) -module -avoid-version
 
-kcontrol_SOURCES = dummy.cpp
-kcontrol_LDADD = kcontrol.la
+kcontrol_SOURCES = kcontrol_main.cpp
+kcontrol_LDADD = libkcontrol_main.la
 kcontrol_LDFLAGS = $(all_libraries) $(KDE_RPATH) -export-dynamic
 
-kcmshell_SOURCES = dummy.cpp
-kcmshell_LDADD = kcmshell.la
+kcmshell_SOURCES = kcmshell_main.cpp
+kcmshell_LDADD = libkcmshell_main.la
 kcmshell_LDFLAGS = $(all_libraries) $(KDE_RPATH) -export-dynamic
 
-kcminit_SOURCES = dummy.cpp
-kcminit_LDADD = kcminit.la
+kcminit_SOURCES = kcminit_main.cpp
+kcminit_LDADD = libkcminit_main.la
 kcminit_LDFLAGS = $(all_libraries) $(KDE_RPATH) -export-dynamic
 
 rcdir = $(kde_datadir)/kcontrol
@@ -71,6 +81,3 @@
 
 messages: rc.cpp
 	$(XGETTEXT) *.cpp -o $(podir)/kcontrol.pot
-
-dummy.cpp:
-	echo > dummy.cpp
