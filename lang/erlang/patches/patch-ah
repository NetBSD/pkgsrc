$NetBSD: patch-ah,v 1.3 2009/12/15 12:07:57 asau Exp $

--- lib/compiler/src/v3_codegen.erl.orig	2008-02-05 08:37:35.000000000 -0500
+++ lib/compiler/src/v3_codegen.erl
@@ -1481,6 +1481,8 @@ cg_binary_size_1([], Bits, Acc) ->
     Sizes = filter(fun({_,{integer,0}}) -> false;
 		      (_) -> true end, Sizes0),
     case Sizes of
+       [] ->
+           {bs_init2,[{integer,0}]};
 	[{1,_}|_] ->
 	    {bs_init_bits,cg_binary_bytes_to_bits(Sizes, [])};
 	[{8,_}|_] ->
