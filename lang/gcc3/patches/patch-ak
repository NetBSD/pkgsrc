$NetBSD: patch-ak,v 1.1 2004/04/10 15:47:08 seb Exp $

--- gcc/ada/Makefile.in.orig	2003-07-04 13:53:53.000000000 -0600
+++ gcc/ada/Makefile.in
@@ -1028,6 +1028,30 @@ ifeq ($(strip $(filter-out cygwin32% min
   EXTRA_GNATRTL_NONTASKING_OBJS = g-regist.o
 endif
 
+ifeq ($(strip $(filter-out %86 netbsdelf%,$(arch) $(osys))),)
+  LIBGNAT_TARGET_PAIRS = \
+    a-numaux.adb<86numaux.adb \
+    a-numaux.ads<86numaux.ads \
+    a-intnam.ads<4netbsdintnam.ads \
+    s-inmaop.adb<7sinmaop.adb \
+    s-intman.adb<5netbsdintman.adb \
+    s-mastop.adb<5omastop.adb \
+    s-osinte.adb<5netbsdosinte.adb \
+    s-osinte.ads<5netbsdosinte.ads \
+    s-osprim.adb<5posprim.adb \
+    s-parame.adb<5netbsdparame.adb \
+    s-taprop.adb<5netbsdtaprop.adb \
+    s-tasinf.ads<5ftasinf.ads \
+    s-taspri.ads<7staspri.ads \
+    s-tpopse.adb<5netbsdtpopse.adb \
+    s-tpopsp.adb<7netbsdtpopsp.adb \
+    system.ads<5netbsdsystem.ads
+
+  THREADSLIB=-pthread
+  EXTRA_GNATRTL_TASKING_OBJS=adasignal.o ada_lwp_self.o
+
+endif
+
 # The runtime library for gnat comprises two directories.  One contains the
 # Ada source files that the compiler (gnat1) needs -- these files are listed
 # by ADA_INCLUDE_SRCS -- and the other contains the object files and their
@@ -1609,7 +1633,7 @@ gnattools2: ../stamp-tools
 	  TOOLSCASE=native \
 	  ../../gnatchop$(exeext) ../../gnat$(exeext) ../../gnatkr$(exeext) \
 	  ../../gnatls$(exeext) ../../gnatprep$(exeext) \
-	  ../../gnatpsta$(exeext) ../../gnatxref$(exeext) \
+	  ../../gnatxref$(exeext) \
           ../../gnatfind$(exeext) ../../gnatname$(exeext)
 
 # These tools are only built for the native version.
