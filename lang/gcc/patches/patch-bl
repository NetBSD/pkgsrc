$NetBSD: patch-bl,v 1.1 2002/01/03 20:40:46 tron Exp $

--- ../gcc-2.95.3/gcc/Makefile.in.orig	Thu Jan 25 15:02:58 2001
+++ ../gcc-2.95.3/gcc/Makefile.in	Thu Jan  3 20:37:54 2002
@@ -41,7 +41,7 @@
 # Selection of languages to be made.
 # This is overridden by configure.
 CONFIG_LANGUAGES = @all_languages@
-LANGUAGES = c proto gcov$(exeext) $(CONFIG_LANGUAGES)
+LANGUAGES = c gcov$(exeext) $(CONFIG_LANGUAGES)
 
 # Languages should create dependencies of $(INTL_TARGETS) on generated
 # sources in Make-lang.in.  Example:
@@ -802,27 +802,6 @@
 	LANGUAGES="$(CONFIG_LANGUAGES)" $(SHELL) config.run
 	rm -f config.run
 
-$(srcdir)/configure: $(srcdir)/configure.in
-	cd $(srcdir); autoconf
-
-# cstamp-h.in controls rebuilding of config.in.
-# It is named cstamp-h.in and not stamp-h.in so the mostlyclean rule doesn't
-# delete it.  A stamp file is needed as autoheader won't update the file if
-# nothing has changed.
-# It remains in the source directory and is part of the distribution.
-# This follows what is done in shellutils, fileutils, etc.
-# "echo timestamp" is used instead of touch to be consistent with other
-# packages that use autoconf (??? perhaps also to avoid problems with patch?).
-# ??? Newer versions have a maintainer mode that may be useful here.
-$(srcdir)/config.in: $(srcdir)/cstamp-h.in
-$(srcdir)/cstamp-h.in: $(srcdir)/configure.in $(srcdir)/acconfig.h
-	cd $(srcdir) && autoheader
-	@rm -f $(srcdir)/cstamp-h.in
-	echo timestamp > $(srcdir)/cstamp-h.in
-auto-host.h: cstamp-h ; @true
-cstamp-h: config.in config.status
-	CONFIG_HEADERS=auto-host.h:config.in LANGUAGES="$(CONFIG_LANGUAGES)" $(SHELL) config.status
-
 # Really, really stupid make features, such as SUN's KEEP_STATE, may force
 # a target to build even if it is up-to-date.  So we must verify that
 # config.status does not exist before failing.
@@ -1185,7 +1164,7 @@
 	  "$(MULTILIB_MATCHES)" \
 	  "$(MULTILIB_EXCEPTIONS)" \
 	  "$(MULTILIB_EXTRA_OPTS)" > tmp-mlib.h
-	$(srcdir)/move-if-change tmp-mlib.h multilib.h
+	sh $(srcdir)/move-if-change tmp-mlib.h multilib.h
 	touch s-mlib
 
 # Build multiple copies of libgcc.a, one for each target switch.
@@ -1331,12 +1310,12 @@
 	sed -e "/^ifobjc$$/,/^end ifobjc$$/d" \
 	  -e "/^ifc$$/d" -e "/^end ifc$$/d" \
 	  $(srcdir)/c-parse.in >>tmp-c-parse.y
-	$(srcdir)/move-if-change tmp-c-parse.y $(srcdir)/c-parse.y
+	sh $(srcdir)/move-if-change tmp-c-parse.y $(srcdir)/c-parse.y
 
 $(srcdir)/c-gperf.h: c-parse.gperf
 	gperf -L C -F ', 0, 0' -p -j1 -i 1 -g -o -t -G -N is_reserved_word \
 	   -k1,3,$$ $(srcdir)/c-parse.gperf >tmp-gperf.h
-	 $(srcdir)/move-if-change tmp-gperf.h $(srcdir)/c-gperf.h
+	 sh $(srcdir)/move-if-change tmp-gperf.h $(srcdir)/c-gperf.h
 
 c-decl.o : c-decl.c $(CONFIG_H) system.h $(TREE_H) c-tree.h c-lex.h flags.h \
     output.h toplev.h
@@ -1396,7 +1375,7 @@
 	else \
 	  echo "int prepends_underscore = 0;" >>tmp-under.c; \
 	fi
-	$(srcdir)/move-if-change tmp-under.c underscore.c
+	sh $(srcdir)/move-if-change tmp-under.c underscore.c
 	-rm -f tmp-dum.c tmp-dum.s
 	touch s-under
 
@@ -1425,7 +1404,7 @@
 tree-check.h: s-check ; @true
 s-check : gencheck $(srcdir)/move-if-change
 	./gencheck > tmp-check.h
-	$(srcdir)/move-if-change tmp-check.h tree-check.h
+	sh $(srcdir)/move-if-change tmp-check.h tree-check.h
 	touch s-check
 
 gencheck : gencheck.o $(lang_tree_files) $(HOST_LIBDEPS)
@@ -1650,19 +1629,19 @@
 insn-config.h: s-config ; @true
 s-config : $(md_file) genconfig $(srcdir)/move-if-change
 	./genconfig $(md_file) > tmp-config.h
-	$(srcdir)/move-if-change tmp-config.h insn-config.h
+	sh $(srcdir)/move-if-change tmp-config.h insn-config.h
 	touch s-config
 
 insn-flags.h: s-flags ; @true
 s-flags : $(md_file) genflags $(srcdir)/move-if-change
 	./genflags $(md_file) > tmp-flags.h
-	$(srcdir)/move-if-change tmp-flags.h insn-flags.h
+	sh $(srcdir)/move-if-change tmp-flags.h insn-flags.h
 	touch s-flags
 
 insn-codes.h: s-codes ; @true
 s-codes : $(md_file) gencodes $(srcdir)/move-if-change
 	./gencodes $(md_file) > tmp-codes.h
-	$(srcdir)/move-if-change tmp-codes.h insn-codes.h
+	sh $(srcdir)/move-if-change tmp-codes.h insn-codes.h
 	touch s-codes
 
 insn-emit.o : insn-emit.c $(CONFIG_H) $(RTL_H) $(EXPR_H) real.h output.h \
@@ -1672,7 +1651,7 @@
 insn-emit.c: s-emit ; @true
 s-emit : $(md_file) genemit $(srcdir)/move-if-change
 	./genemit $(md_file) > tmp-emit.c
-	$(srcdir)/move-if-change tmp-emit.c insn-emit.c
+	sh $(srcdir)/move-if-change tmp-emit.c insn-emit.c
 	touch s-emit
 
 insn-recog.o : insn-recog.c $(CONFIG_H) $(RTL_H) insn-config.h $(RECOG_H) \
@@ -1682,7 +1661,7 @@
 insn-recog.c: s-recog ; @true
 s-recog : $(md_file) genrecog $(srcdir)/move-if-change
 	./genrecog $(md_file) > tmp-recog.c
-	$(srcdir)/move-if-change tmp-recog.c insn-recog.c
+	sh $(srcdir)/move-if-change tmp-recog.c insn-recog.c
 	touch s-recog
 
 insn-opinit.o : insn-opinit.c $(CONFIG_H) $(RTL_H) insn-codes.h insn-flags.h \
@@ -1692,7 +1671,7 @@
 insn-opinit.c: s-opinit ; @true
 s-opinit : $(md_file) genopinit $(srcdir)/move-if-change
 	./genopinit $(md_file) > tmp-opinit.c
-	$(srcdir)/move-if-change tmp-opinit.c insn-opinit.c
+	sh $(srcdir)/move-if-change tmp-opinit.c insn-opinit.c
 	touch s-opinit
 
 insn-extract.o : insn-extract.c $(CONFIG_H) $(RTL_H) system.h toplev.h \
@@ -1702,7 +1681,7 @@
 insn-extract.c: s-extract ; @true
 s-extract : $(md_file) genextract $(srcdir)/move-if-change
 	./genextract $(md_file) > tmp-extract.c
-	$(srcdir)/move-if-change tmp-extract.c insn-extract.c
+	sh $(srcdir)/move-if-change tmp-extract.c insn-extract.c
 	touch s-extract
 
 insn-peep.o : insn-peep.c $(CONFIG_H) $(RTL_H) $(REGS_H) output.h real.h \
@@ -1712,7 +1691,7 @@
 insn-peep.c: s-peep ; @true
 s-peep : $(md_file) genpeep $(srcdir)/move-if-change
 	./genpeep $(md_file) > tmp-peep.c
-	$(srcdir)/move-if-change tmp-peep.c insn-peep.c
+	sh $(srcdir)/move-if-change tmp-peep.c insn-peep.c
 	touch s-peep
 
 insn-attrtab.o : insn-attrtab.c $(CONFIG_H) $(RTL_H) $(REGS_H) real.h \
@@ -1722,7 +1701,7 @@
 insn-attr.h: s-attr ; @true
 s-attr : $(md_file) genattr $(srcdir)/move-if-change
 	./genattr $(md_file) > tmp-attr.h
-	$(srcdir)/move-if-change tmp-attr.h insn-attr.h
+	sh $(srcdir)/move-if-change tmp-attr.h insn-attr.h
 	touch s-attr
 
 insn-attrtab.c: s-attrtab ; @true
@@ -1734,7 +1713,7 @@
 	else					\
 	  ./genattrtab $(md_file) > tmp-attrtab.c;	\
 	fi
-	$(srcdir)/move-if-change tmp-attrtab.c insn-attrtab.c
+	sh $(srcdir)/move-if-change tmp-attrtab.c insn-attrtab.c
 	touch s-attrtab
 
 insn-output.o : insn-output.c $(CONFIG_H) $(RTL_H) $(REGS_H) real.h conditions.h \
@@ -1745,7 +1724,7 @@
 insn-output.c: s-output ; @true
 s-output : $(md_file) genoutput $(srcdir)/move-if-change
 	./genoutput $(md_file) > tmp-output.c
-	$(srcdir)/move-if-change tmp-output.c insn-output.c
+	sh $(srcdir)/move-if-change tmp-output.c insn-output.c
 	touch s-output
 
 genrtl.o : genrtl.c $(CONFIG_H) $(RTL_H) system.h
@@ -1754,8 +1733,8 @@
 
 s-genrtl: gengenrtl $(srcdir)/move-if-change $(RTL_BASE_H)
 	./gengenrtl tmp-genrtl.h tmp-genrtl.c
-	$(srcdir)/move-if-change tmp-genrtl.h genrtl.h
-	$(srcdir)/move-if-change tmp-genrtl.c genrtl.c
+	sh $(srcdir)/move-if-change tmp-genrtl.h genrtl.h
+	sh $(srcdir)/move-if-change tmp-genrtl.c genrtl.c
 	touch s-genrtl
 
 #
