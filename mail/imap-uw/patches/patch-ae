$NetBSD: patch-ae,v 1.8 2000/05/19 03:58:57 jlam Exp $

--- src/osdep/unix/Makefile.orig	Tue Nov 16 21:05:48 1999
+++ src/osdep/unix/Makefile	Tue May  2 15:18:30 2000
@@ -99,7 +99,7 @@
 
 # Normally no need to change any of these
 
-ARCHIVE=c-client.a
+ARCHIVE=libimapuw.la
 BINARIES=mail.o misc.o newsrc.o smanager.o osdep.o utf8.o siglocal.o \
  dummy.o pseudo.o netmsg.o flstring.o fdstring.o \
  rfc822.o nntp.o smtp.o imap4r1.o pop3.o \
@@ -122,7 +122,7 @@
 # Here if no make argument established
 
 missing: osdep.h
-	$(MAKE) all CC=`cat CCTYPE` CFLAGS="`cat CFLAGS`" `cat EXTRASPECIALS`
+	$(MAKE) all CC="`cat CCTYPE`" CFLAGS="`cat CFLAGS`" `cat EXTRASPECIALS`
 
 osdep.h:
 	@echo You must specify what type of system
@@ -386,10 +386,11 @@
 
 neb:	# NetBSD
 	$(BUILD) `cat EXTRASPECIALS` OS=bsi \
+	 CC="$(CC)" \
 	 SPOOLDIR=/var \
-	 ACTIVEFILE=/var/db/news/active \
+	 ACTIVEFILE=/var/news/db/active \
 	 RSHPATH=/usr/bin/rsh \
-	 BASECFLAGS="-g -O -pipe -DNFSKLUDGE" \
+	 BASECFLAGS="-O -pipe -DNFSKLUDGE" \
 	 BASELDFLAGS="-lcrypt"
 
 nxt:	# NEXTSTEP
@@ -709,7 +710,7 @@
 	 -DACTIVEFILE=\"$(ACTIVEFILE)\" -DNEWSSPOOL=\"$(NEWSSPOOL)\" \
 	 -DRSHPATH=\"$(RSHPATH)\" -DLOCKPGM=\"$(LOCKPGM)\" > OSCFLAGS
 	echo $(BASELDFLAGS) $(EXTRALDFLAGS) > LDFLAGS
-	echo "$(ARRC) $(ARCHIVE) $(BINARIES);$(RANLIB) $(ARCHIVE)" > ARCHIVE
+	echo "$(CC) -o $(ARCHIVE) $(BINARIES:.o=.lo) -rpath $(PREFIX)/lib -version-info 4:0" > ARCHIVE
 	./drivers $(EXTRADRIVERS) $(DEFAULTDRIVERS) dummy
 	./mkauths $(EXTRAAUTHENTICATORS) $(DEFAULTAUTHENTICATORS)
 	$(LN) os_$(OS).h osdep.h
