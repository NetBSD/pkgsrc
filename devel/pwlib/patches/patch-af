$NetBSD: patch-af,v 1.3 2004/10/08 21:02:54 mjl Exp $

--- ./src/ptlib/unix/Makefile.orig	Wed Aug 14 17:18:54 2002
+++ ./src/ptlib/unix/Makefile	Sun Aug 18 23:09:15 2002
@@ -512,26 +512,26 @@
 
 
 $(OBJDIR)/regcomp.o: $(COMMON_SRC_DIR)/regex/regcomp.c
-	$(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
+	$(LIBTOOL) --tag=CC --mode=compile $(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
 
 $(OBJDIR)/regexec.o: $(COMMON_SRC_DIR)/regex/regexec.c
-	$(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
+	$(LIBTOOL) --tag=CC --mode=compile $(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
 
 $(OBJDIR)/regerror.o: $(COMMON_SRC_DIR)/regex/regerror.c
-	$(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
+	$(LIBTOOL) --tag=CC --mode=compile $(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
 
 $(OBJDIR)/regfree.o: $(COMMON_SRC_DIR)/regex/regfree.c
-	$(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
+	$(LIBTOOL) --tag=CC --mode=compile $(CC) $(CFLAGS) $(DEBUG_FLAG) $(OPTCCFLAGS) -c -DPOSIX_MISTAKE -I$(COMMON_SRC_DIR)/regex -o $@ -c $<
 
 
 ifdef REQUIRES_SEPARATE_SWITCH 
 $(OBJDIR)/switch.o: ./switch.cxx
 	@if [ ! -d $(OBJDIR) ] ; then mkdir -p $(OBJDIR) ; fi
-	$(CPLUS) $(CFLAGS) $(STDCCFLAGS) -c $< -o $@
+	$(LIBTOOL) --tag=CXX --mode=compile $(CPLUS) $(CFLAGS) $(STDCCFLAGS) -c $< -o $@
 endif
 
 $(OBJDIR)/getdate.tab.o: $(GETDATE_SOURCE)
-	$(CC) $(CFLAGS) $(STDCCFLAGS) -c $< -o $@
+	$(LIBTOOL) --tag=CC --mode=compile $(CC) $(CFLAGS) $(STDCCFLAGS) -c $< -o $@
 
 $(DEPDIR)/getdate.tab.dep: $(GETDATE_SOURCE)
 	$(CC) $(STDCCFLAGS) -M $< >> $@
