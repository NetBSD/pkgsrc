$NetBSD: patch-aa,v 1.6 2001/10/02 11:07:15 seb Exp $

--- Makefile.in.orig	Mon Jun  4 07:18:51 2001
+++ Makefile.in
@@ -148,7 +148,7 @@
 
 # The following is the first rule and therefore the "make" command's
 # default target.
-enough: $(VM) $(IMAGE) script $(LIBCIG) scsh $(LIBSCSH) $(MANPAGE) .notify
+enough: $(VM) $(IMAGE) script $(LIBCIG) scsh $(LIBSCSH) $(MANPAGE)
 
 # The developers are curious to know.  Don't be concerned if this fails.
 # You may comment these lines out if you wish to be discourteous.
@@ -286,6 +286,7 @@
 	$(RM) -r $(LIB).old
 	if [ -d $(LIB) ] ; then mv $(LIB) $(LIB).old ; fi
 	mkdir $(LIB)
+	mkdir $(LIB)/emacs
 	mkdir $(LIB)/big
 	mkdir $(LIB)/cig
 	mkdir $(LIB)/doc
@@ -295,6 +296,9 @@
 	mkdir $(LIB)/misc
 	mkdir $(LIB)/opt
 	mkdir $(LIB)/scsh
+	mkdir $(LIB)/scsh/rx
+	mkdir $(LIB)/scsh/lib
+	mkdir $(LIB)/scsh/machine
 	mkdir $(LIB)/rts
 	mkdir $(LIB)/vm
 
@@ -310,11 +314,11 @@
           else echo "No man directory, not installing man page"; fi
 
 install-inc: scheme48.h
-	$(INSTALL_DATA) $(srcdir)/scheme48.h $(incdir)/
+	$(INSTALL_DATA) $(srcdir)/scheme48.h $(incdir)/scsh.h
 
 install-cig: cig
-	$(INSTALL_PROGRAM) $(srcdir)/$(CIG) $(LIB)/cig
-	$(INSTALL_PROGRAM) $(srcdir)/$(CIG).image $(LIB)/cig
+	$(INSTALL_SCRIPT) $(srcdir)/$(CIG) $(LIB)/cig
+	$(INSTALL_SCRIPT) $(srcdir)/$(CIG).image $(LIB)/cig
 	$(INSTALL_DATA) $(srcdir)/$(LIBCIG) $(LIB)/cig
 	$(INSTALL_DATA) $(srcdir)/cig/libcig.h $(LIB)/cig
 
@@ -322,6 +326,7 @@
 	      $(LIB)/misc $(LIB)/link $(LIB)/vm $(LIB)/doc
 	for f in $(srcdir)/rts/*num.scm; \
 	    do $(INSTALL_DATA) $$f $(LIB)/rts/; done
+	for f in $(srcdir)/emacs/*; do $(INSTALL_DATA) $$f $(LIB)/emacs/; done
 	for f in $(srcdir)/env/*.scm; do $(INSTALL_DATA) $$f $(LIB)/env/; done
 	for f in $(srcdir)/big/*.scm; do $(INSTALL_DATA) $$f $(LIB)/big/; done
 	for f in $(srcdir)/opt/*.scm; do $(INSTALL_DATA) $$f $(LIB)/opt/; done
@@ -727,13 +732,20 @@
 
 install-scsh: scsh
 	$(RM) $(bindir)/$(RUNNABLE)$(EXEEXT)
-	$(INSTALL_PROGRAM) $(srcdir)/scsh/scsh$(EXEEXT) \
+	$(INSTALL_SCRIPT) $(srcdir)/scsh/scsh$(EXEEXT) \
 	    $(bindir)/$(RUNNABLE)$(EXEEXT)
-	$(INSTALL_PROGRAM) $(srcdir)/scsh/scsh.image $(LIB)/scsh.image
+	$(INSTALL_DATA) $(srcdir)/scsh/scsh.image $(LIB)/scsh.image
 	$(INSTALL_PROGRAM) $(srcdir)/$(LIBSCSH) $(libdir)/$(LIBSCSH)
 	$(RANLIB) $(libdir)/$(LIBSCSH)
 	for f in $(srcdir)/scsh/*.scm; \
 	    do $(INSTALL_DATA) $$f $(LIB)/scsh/; done
+	for f in $(srcdir)/scsh/lib/*.scm; \
+	    do $(INSTALL_DATA) $$f $(LIB)/scsh/lib/; done
+	for f in $(srcdir)/scsh/rx/*.scm; \
+	    do $(INSTALL_DATA) $$f $(LIB)/scsh/rx/; done
+	for f in $(srcdir)/scsh/machine/*.scm; \
+	    do $(INSTALL_DATA) $$f $(LIB)/scsh/machine/; done
+
 
 clean-scsh:
 	$(RM) scsh/*.o
