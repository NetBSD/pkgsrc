.\"	$NetBSD: pkg_src_summary.1,v 1.1.1.1 2011/05/11 19:24:47 cheusov Exp $
.\"
.\" Copyright (c) 2008-2010 by Aleksey Cheusov (vle@gmx.net)
.\" Absolutely no warranty.
.\"
.\" ------------------------------------------------------------------
.de VB \" Verbatim Begin
.ft CW
.nf
.ne \\$1
..
.de VE \" Verbatim End
.ft R
.fi
..
.\" ------------------------------------------------------------------
.TH PKG_SRC_SUMMARY 1 "Jan 29, 2008" "" ""
.SH NAME
pkg_src_summary \- build summary information for source packages
.SH SYNOPSIS
.BI pkg_src_summary " [OPTIONS] [pkgpath1 ...]"
.br
.BI pkg_src_summary " -s [OPTIONS]"
.br
.BI pkg_src_summary " -i [OPTIONS]"
.SH DESCRIPTION
.B pkg_src_summary
builds summary information about source packages specified in
arguments or read from stdin (one package per line).  Format of this
summary information is the same as used in pkg_summary(5) built from
binary packages. List of fields (PKGNAME, PKGPATH, DEPENDS etc.) is
very similar but not fully the same.
.SH OPTIONS
.TP
.B "-h"
display help message
.TP
.BI "-f" " fields"
A list of fields (separated by space character or comma) to be generated. By
default the following fields are generated: PKGNAME, PKGPATH, DEPENDS,
BUILD_DEPENDS, CONFLICTS, HOMEPAGE, COMMENT, LICENSE, ONLYFOR, NOTFOR,
MAINTAINER, CATEGORIES, NO_BIN_ON_FTP, NO_SRC_ON_FTP,
NO_BIN_ON_CDROM, NO_SRC_ON_CDROM, ALLSRCFILES, ALLDISTFILES,
DESCRIPTION (multiline), PLIST(multiline).
The following fields are NOT generated by default: CVS_CHECKSUM,
ALLDISTFILES. ALLDISTFILES value lists distfiles with their
sizes (obtained from distinfo file) separated by colon.
ALLSRCFILES value lists distfiles with relative directory (if any)
under ${DISTDIR}.
.TP
.BI "-a" " fields"
Add the specified fields to the list of fields generated by default
.TP
.BI "-r" " fields"
Remove the specified fields from the list of fields generated by default
.TP
.B "-b"
add value of variable BOOTSTRAP_DEPENDS to BUILD_DEPENDS
.TP
.B "-l"
add library dependencies (buildlink3.mk) to BUILD_DEPENDS
.TP
.B "-p"
use 'bmake plist' for obtaining PLIST
.TP
.B "-d"
generate summary for specified packages and their dependancies (DEPENDS)
.TP
.B "-D"
generate summary for specified packages and their dependancies (BUILD_DEPENDS)
.TP
.B "-A"
generate summary for specified packages and all their dependancies, that is,
implies -d and -D
.TP
.B "-m"
generate summary for all variants of multi-variant packages
(Python {22,23,24,25}, PHP {4,5}, Apache {1.3,2,2.2} etc.)
.TP
.B "-M"
implies -m and moves/adds ASSIGNMENTS field to PKGPATH
.TP
.B "-i"
generate src_summary for the installed packages only,
do not read list of packages from stdin and from pkgpathN arguments
.SH ENVIRONMENT
.TP
.B PKGSRCDIR
pkgsrc root directory
.TP
.B BMAKE
path to pkgsrc friendly make utility
.TP
.B PSS_SLAVES
Space separated list of remote hosts or +<Number> for distributed
summary generation. If case of +<Number>, <Number> local processes
are run, this is useful for SMP machines.
.TP
.B PSS_TRANSPORT
Transport program like ssh or rsh to communicate with remote/slave hosts.
.TP
.B PSS_PPERS
A number of packages per slave that are built at once, defaults to 10.
.TP
.B PSS_OPTIONS
This variable specifies default options to be placed in front of
any explicit options.
.TP
.B PSS_PAEXEC_EXTRA_OPTS
Additional options passed to
.I paexec
executable in case a pkg_summary is built in parallel. Example: -Z300
.TP
.BR PSS_PRE_PATH ", " PSS_POST_PATH
In a distributed mode prepand and append PSS_PRE_PATH and PSS_POST_PATH to
PATH
.SH EXAMPLES
.VB
pkg_src_summary wip/dict-server wip/dict-mueller7 wip/dict-client
printf 'wip/dict-server\\nwip/dict-client\\n' | pkg_src_summary
env BMAKE=/usr/pkg/bin/bmake \\ 
   PSS_SLAVES='host1 host2' \\ 
   PSS_TRANSPORT=/usr/bin/ssh \\ 
   /usr/pkg/bin/pkg_src_summary \\ 
          -f 'PKGNAME PKGPATH DEPENDS BUILD_DEPENDS' \\ 
          < /tmp/packages.txt \\ 
pkg_list_all_pkgs | env PSS_SLAVES='+6' pkg_src_summary
env PSS_OPTIONS=-p pkg_update_src_summary /path/to/pkg_src_summary.txt
pkg_src_summary -a CVS_CHECKSUM x11/xxkb wip/distbb
pkg_src_summary -r LICENSE,PLIST,DESCR x11/xxkb wip/distbb
pkg_src_summary -m lang/lua www/php-apc www/ap2-python
pkg_src_summary -i
pkg_src_summary -l -b textproc/dict-server
.VE
.SH SEE ALSO
.BR pkg_summary-utils(7) ,
.B pkg_summary(5)
.SH AUTHOR
Aleksey Cheusov <vle@gmx.net>
