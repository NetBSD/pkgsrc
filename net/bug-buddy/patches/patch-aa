$NetBSD: patch-aa,v 1.5 2008/12/24 03:05:16 jmcneill Exp $

--- configure.in.orig	2008-12-23 21:57:53.000000000 -0500
+++ configure.in	2008-12-23 22:00:01.000000000 -0500
@@ -123,7 +123,7 @@
 AM_CONDITIONAL(BREAKPAD_SOLARIS, test x$solaris = xyes)
 AM_CONDITIONAL(BREAKPAD_LINUX, test x$linux = xyes)
 
-GDK_REQUIRED="x11 gdk-x11-2.0 >= 2.9"
+GDK_REQUIRED="gdk-x11-2.0 >= 2.9"
 PKG_CHECK_MODULES(GNOME_BREAKPAD,
 [
 	$GDK_REQUIRED
@@ -131,6 +131,18 @@
 AC_SUBST(GNOME_BREAKPAD_CFLAGS)
 AC_SUBST(GNOME_BREAKPAD_LIBS)
 
+PKG_CHECK_MODULES(X11, x11 >= $X11_REQUIRED_VERSION, [HAVE_X11=yes], [HAVE_X11=no])
+if test x$HAVE_X11 = xno; then
+  AC_PATH_XTRA
+  if test "x$no_x" = xyes; then
+    AC_MSG_ERROR(X11 and Xrandr development libraries not found);
+  else
+    XLIB_LIBS="$X_PRE_LIBS $X_LIBS -lX11 $X_EXTRA_LIBS"
+    XLIB_CFLAGS=$X_CFLAGS
+  fi
+fi
+GNOME_BREAKPAD_CFLAGS="$GNOME_BREAKPAD_CFLAGS $X11_CFLAGS $XLIB_CFLAGS"
+GNOME_BREAKPAD_LIBS="$GNOME_BREAKPAD_LIBS $X11_LIBS $XLIB_LIBS"
 
 PKG_CHECK_MODULES(GNOME_CRASH, $LIBGNOMEUI_REQUIRED)
 AC_SUBST(GNOME_CRASH_CFLAGS)
