--- agent/Makefile.in.orig	Fri Aug 13 07:16:28 1999
+++ agent/Makefile.in	Fri Jan 21 08:53:53 2000
@@ -3,9 +3,11 @@
 #
 
 TARG		= snmpd
-USELIBS		= ../snmplib/libsnmp.$(SHLIB_EXTENSION)$(SHLIB_VERSION)
-LOCAL_LIBS	= -L../snmplib
-LIBS		= $(CC_RUNTIME_ARG) -lsnmp @WRAPLIBS@ @LIBS@
+#USELIBS		= ../snmplib/libsnmp.$(SHLIB_EXTENSION)$(SHLIB_VERSION)
+USELIBS= ../snmplib/libsnmp.la
+#LOCAL_LIBS	= -L../snmplib
+#LIBS		= $(CC_RUNTIME_ARG) -lsnmp @WRAPLIBS@ @LIBS@
+LIBS=	 ${USELIBS} @WRAPLIBS@ @LIBS@
 
 CPPFLAGS	= -I.. -I$(srcdir)/.. -I$(srcdir)/../snmplib		\
 		  -I$(srcdir) -I. -I$(srcdir)/mibgroup -Imibgroup @CPPFLAGS@
@@ -24,23 +26,23 @@
 #	cd dlmods; $(MAKE); cd ..
 
 getkstat: getkstat.o
-	$(CC) $(CFLAGS) -o $@ $? $(LOCAL_LIBS) $(LIBS)
+	$(LIBTOOL) $(CC) $(CFLAGS) -o $@ $? $(LOCAL_LIBS) $(LIBS)
 
 getkstat.o: mibgroup/kernel_sunos5.c
-	$(CC) $(CFLAGS) -o $@ -D_GETKSTAT_TEST -DDODEBUG -c $? 
+	$(LIBTOOL) $(CC) $(CFLAGS) -o $@ -D_GETKSTAT_TEST -DDODEBUG -c $? 
 
 getmibstat: getmibstat.o
-	$(CC) $(CFLAGS) -o $@ $? $(LOCAL_LIBS) $(LIBS)
+	$(LIBTOOL) $(CC) $(CFLAGS) -o $@ $? $(LOCAL_LIBS) $(LIBS)
 
 getmibstat.o: mibgroup/kernel_sunos5.c
-	$(CC) $(CFLAGS) -o $@ -D_GETMIBSTAT_TEST -DDODEBUG -c $? 
+	$(LIBTOOL) $(CC) $(CFLAGS) -o $@ -D_GETMIBSTAT_TEST -DDODEBUG -c $? 
 
 
 AGENTOBJS=snmpd.o kernel.o snmp_agent.o snmp_vars.o agent_read_config.o agent_registry.o auto_nlist.o
 
 
 snmpd:	${MIBOBJS} ${AGENTOBJS} $(USELIBS)
-	${CC} -o $@ ${AGENTOBJS} ${MIBOBJS} $(LOCAL_LIBS) ${LDFLAGS} ${LIBS}  
+	$(LIBTOOL) ${CC} -o $@ ${AGENTOBJS} ${MIBOBJS} $(LOCAL_LIBS) ${LDFLAGS} ${LIBS}  
 
 
 clean:
@@ -50,7 +52,7 @@
 
 
 install:  installdirs
-	@$(INSTALL) $(TARG) $(sbindir) ; echo "install:  installed $(TARG) in $(sbindir) "
+	@$(LIBTOOL) $(INSTALL) $(TARG) $(sbindir) ; echo "install:  installed $(TARG) in $(sbindir) "
 #	cd dlmods ; $(MAKE) install; cd ..
 
 installdirs:
