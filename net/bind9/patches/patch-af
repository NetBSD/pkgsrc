$NetBSD: patch-af,v 1.5 2004/10/03 09:20:41 tron Exp $

--- lib/bind/configure.in.orig	2004-03-15 10:02:44.000000000 +0900
+++ lib/bind/configure.in	2004-05-16 05:09:55.000000000 +0900
@@ -367,7 +367,8 @@
 [linking with PTL2 is highly experimental and not expected to work])
 			CC=ptlgcc
 		else
-			if test ! -d $LOCALBASE/pthreads
+			if test ! -d $LOCALBASE/pthreads \
+				-a ! -f /usr/include/pthread.h
 			then
 				AC_MSG_RESULT(none)
 				use_threads=false
@@ -375,13 +376,21 @@
 
 			if $use_threads
 			then
-				AC_MSG_RESULT(mit-pthreads/unproven-pthreads)
-				pkg="$LOCALBASE/pthreads"
-				lib1="-L$pkg/lib -Wl,-R$pkg/lib"
-				lib2="-lpthread -lm -lgcc -lpthread"
-				LIBS="$lib1 $lib2 $LIBS"
-				CPPFLAGS="$CPPFLAGS -I$pkg/include"
-				STD_CINCLUDES="$STD_CINCLUDES -I$pkg/include"
+				if test -f /usr/include/pthread.h
+				then
+					AC_MSG_RESULT(native pthreads)
+					LIBS="-lpthread $LIBS"
+					CPPFLAGS="$CPPFLAGS -I/usr/include"
+					STD_CINCLUDES="$STD_CINCLUDES -I/usr/include"
+				else
+					AC_MSG_RESULT(mit-pthreads/unproven-pthreads)
+					pkg="$LOCALBASE/pthreads"
+					lib1="-L$pkg/lib -Wl,-R$pkg/lib"
+					lib2="-lpthread -lm -lgcc -lpthread"
+					LIBS="$lib1 $lib2 $LIBS"
+					CPPFLAGS="$CPPFLAGS -I$pkg/include"
+					STD_CINCLUDES="$STD_CINCLUDES -I$pkg/include"
+				fi
 			fi
 		fi
 		;;
