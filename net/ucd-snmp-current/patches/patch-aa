$NetBSD: patch-aa,v 1.6 2002/01/11 06:42:36 itojun Exp $

--- configure.in.orig	Tue Nov 27 23:51:57 2001
+++ configure.in	Fri Jan 11 15:28:57 2002
@@ -1022,23 +1022,23 @@
 dnl
 dnl now check for rpm using the appropriate db library
 dnl
-AC_CHECK_LIB(rpm, rpmdbOpen,[
-  AC_DEFINE(HAVE_LIBRPM)
-  LIBS="-lrpm $LIBS"
-  CFLAGS="$CFLAGS -I/usr/include/rpm"
-],,-lz)
+#AC_CHECK_LIB(rpm, rpmdbOpen,[
+#  AC_DEFINE(HAVE_LIBRPM)
+#  LIBS="-lrpm $LIBS"
+#  CFLAGS="$CFLAGS -I/usr/include/rpm"
+#],,-lz)
 
 dnl
 dnl now check for rpm using the appropriate db library
 dnl
-if test x$ac_cv_lib_rpm_rpmdbOpen = xno; then
-  unset ac_cv_lib_rpm_rpmdbOpen
-  AC_CHECK_LIB(rpm, rpmdbOpen,[
-    AC_DEFINE(HAVE_LIBRPM)
-    LIBS="-lrpm -lpopt $LIBS"
-    CFLAGS="$CFLAGS -I/usr/include/rpm"
-  ],,-lpopt -lz)
-fi
+#if test x$ac_cv_lib_rpm_rpmdbOpen = xno; then
+#  unset ac_cv_lib_rpm_rpmdbOpen
+#  AC_CHECK_LIB(rpm, rpmdbOpen,[
+#    AC_DEFINE(HAVE_LIBRPM)
+#    LIBS="-lrpm -lpopt $LIBS"
+#    CFLAGS="$CFLAGS -I/usr/include/rpm"
+#  ],,-lpopt -lz)
+#fi
 
 
 dnl Replace `main' with a function in -lkstat:
@@ -1064,7 +1064,7 @@
 AC_HEADER_STDC
 AC_HEADER_DIRENT
 AC_HEADER_SYS_WAIT
-AC_CHECK_HEADERS(stdarg.h string.h fcntl.h limits.h sys/file.h sys/ioctl.h syslog.h unistd.h netinet/tcpip.h netinet/in.h netinet/ip.h netinet/ip_icmp.h net/if.h netdb.h sys/dmap.h machine/pte.h xti.h sys/sockio.h sys/socket.h sys/un.h fstab.h sys/fs.h mtab.h ufs/fs.h ufs/ffs/fs.h sys/fixpoint.h machine/param.h sys/vm.h vm/vm.h sys/vmmeter.h sys/vmparam.h sys/vmmac.h sys/vmsystm.h sys/mbuf.h sys/time.h sys/swap.h inet/mib2.h sys/statvfs.h sys/vfs.h sys/mnttab.h sys/user.h sys/proc.h sys/select.h mntent.h sys/mntent.h kstat.h utsname.h sys/utsname.h sys/cdefs.h getopt.h locale.h pthread.h sys/loadavg.h regex.h linux/tasks.h pwd.h grp.h utmpx.h)
+AC_CHECK_HEADERS(stdarg.h string.h fcntl.h limits.h sys/file.h sys/ioctl.h syslog.h unistd.h netinet/tcpip.h netinet/in.h netinet/ip.h netinet/ip_icmp.h net/if.h netdb.h sys/dmap.h machine/pte.h xti.h sys/sockio.h sys/socket.h sys/un.h fstab.h sys/fs.h mtab.h ufs/fs.h ufs/ffs/fs.h sys/fixpoint.h machine/param.h vm/vm.h sys/vmmeter.h sys/vmparam.h sys/vmmac.h sys/vmsystm.h sys/mbuf.h sys/time.h sys/swap.h inet/mib2.h sys/statvfs.h sys/vfs.h sys/mnttab.h sys/user.h sys/proc.h sys/select.h mntent.h sys/mntent.h kstat.h utsname.h sys/utsname.h sys/cdefs.h getopt.h locale.h pthread.h sys/loadavg.h regex.h linux/tasks.h pwd.h grp.h utmpx.h)
 dnl FreeBSD required headers
 AC_CHECK_HEADERS(malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_mib.h net/if_types.h net/if_var.h sys/queue.h osreldate.h sys/disklabel.h machine/types.h sys/socketvar.h)
 dnl Linux
@@ -1072,7 +1072,7 @@
 dnl NetBSD required headers
 AC_CHECK_HEADERS(arpa/inet.h kvm.h sys/pool.h)
 dnl BSDi2 headers
-AC_CHECK_HEADERS(sys/mount.h vm/swap_pager.h ufs/ufs/dinode.h)
+AC_CHECK_HEADERS(sys/mount.h ufs/ufs/dinode.h)
 dnl BSDi3 headers
 AC_CHECK_HEADERS(sys/stat.h sys/vnode.h ufs/ufs/quota.h ufs/ufs/inode.h)
 dnl irix headers
@@ -1329,11 +1329,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_dst, no)
 
@@ -1347,11 +1343,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 
@@ -1371,11 +1363,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 struct rtentry rt; 
@@ -1428,11 +1416,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ],[
 struct rtentry rt; 
@@ -1452,11 +1436,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_unit)
 
@@ -1465,11 +1445,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_refcnt)
 
@@ -1478,11 +1454,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_hash)
 
@@ -1491,11 +1463,7 @@
 #include <sys/param.h>
 #endif
 #include <sys/types.h>
-#define KERNEL
-#define _KERNEL
 #include <sys/socket.h>
-#undef KERNEL
-#undef _KERNEL
 #include <net/route.h>
 ], rtentry, rt_use)
 
