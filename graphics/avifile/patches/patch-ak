$NetBSD: patch-ak,v 1.1.1.1 2001/04/12 21:26:21 zuntum Exp $

--- lib/videocodec/Module.cpp.orig	Sun Dec 17 01:07:43 2000
+++ lib/videocodec/Module.cpp
@@ -4,7 +4,7 @@
 #include <registry.h>
 #include <except.h>
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
 #include <sys/time.h>
 #endif
 #define __MODULE__ "Win32 loader"
@@ -138,7 +138,7 @@
     int result;
     DRVR* module=(DRVR*)handle;
     char qw[200];    
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
 	/*   XXX
 	 *	disable Thread Context Switch in Windows Dll Calls.
 	 *	Because Thread Switched Win32 Dll Calls <-> another threads
@@ -155,7 +155,7 @@
     REST_ALL;
     __asm__ __volatile__ ("fsave (%0)\n\t": :"r"(&qw));    
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__NetBSD__)
     setitimer(ITIMER_PROF,&itoval,NULL);
 #endif
     return result;
