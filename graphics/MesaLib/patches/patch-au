$NetBSD: patch-au,v 1.1 2008/04/24 07:40:24 bjs Exp $

--- src/mesa/shader/slang/library/Makefile.orig	2007-06-21 18:10:54.000000000 -0400
+++ src/mesa/shader/slang/library/Makefile
@@ -28,26 +28,26 @@ builtin: builtin_110 builtin_120
 #
 
 syn_to_c: syn_to_c.c
-	$(CC) syn_to_c.c -o syn_to_c
+	$(LIBTOOL) --mode=link $(CC) syn_to_c.c -o syn_to_c -no-install
 
 gc_to_bin: gc_to_bin.c slang_shader_syn.h
-	$(CC) gc_to_bin.c -o gc_to_bin
+	$(LIBTOOL) --mode=link $(CC) gc_to_bin.c -o gc_to_bin -no-install
 
 #
 # syntax scripts
 #
 
 slang_pp_directives_syn.h: syn_to_c slang_pp_directives.syn
-	./syn_to_c slang_pp_directives.syn > slang_pp_directives_syn.h
+	$(LIBTOOL) --mode=execute ./syn_to_c slang_pp_directives.syn > slang_pp_directives_syn.h
 
 slang_pp_expression_syn.h: syn_to_c slang_pp_expression.syn
-	./syn_to_c slang_pp_expression.syn > slang_pp_expression_syn.h
+	$(LIBTOOL) --mode=execute ./syn_to_c slang_pp_expression.syn > slang_pp_expression_syn.h
 
 slang_shader_syn.h: syn_to_c slang_shader.syn
-	./syn_to_c slang_shader.syn > slang_shader_syn.h
+	$(LIBTOOL) --mode=execute ./syn_to_c slang_shader.syn > slang_shader_syn.h
 
 slang_pp_version_syn.h: syn_to_c slang_pp_version.syn
-	./syn_to_c slang_pp_version.syn > slang_pp_version_syn.h
+	$(LIBTOOL) --mode=execute ./syn_to_c slang_pp_version.syn > slang_pp_version_syn.h
 
 #
 # builtin library sources
@@ -59,23 +59,23 @@ builtin_120: slang_120_core_gc.h slang_b
 
 
 slang_120_core_gc.h: gc_to_bin slang_120_core.gc
-	./gc_to_bin 1 slang_120_core.gc slang_120_core_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 1 slang_120_core.gc slang_120_core_gc.h
 
 slang_builtin_120_common_gc.h: gc_to_bin slang_builtin_120_common.gc
-	./gc_to_bin 1 slang_builtin_120_common.gc slang_builtin_120_common_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 1 slang_builtin_120_common.gc slang_builtin_120_common_gc.h
 
 slang_builtin_120_fragment_gc.h: gc_to_bin slang_builtin_120_fragment.gc
-	./gc_to_bin 1 slang_builtin_120_fragment.gc slang_builtin_120_fragment_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 1 slang_builtin_120_fragment.gc slang_builtin_120_fragment_gc.h
 
 slang_common_builtin_gc.h: gc_to_bin slang_common_builtin.gc
-	./gc_to_bin 1 slang_common_builtin.gc slang_common_builtin_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 1 slang_common_builtin.gc slang_common_builtin_gc.h
 
 slang_core_gc.h: gc_to_bin slang_core.gc
-	./gc_to_bin 1 slang_core.gc slang_core_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 1 slang_core.gc slang_core_gc.h
 
 slang_fragment_builtin_gc.h: gc_to_bin slang_fragment_builtin.gc
-	./gc_to_bin 1 slang_fragment_builtin.gc slang_fragment_builtin_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 1 slang_fragment_builtin.gc slang_fragment_builtin_gc.h
 
 slang_vertex_builtin_gc.h: gc_to_bin slang_vertex_builtin.gc
-	./gc_to_bin 2 slang_vertex_builtin.gc slang_vertex_builtin_gc.h
+	$(LIBTOOL) --mode=execute ./gc_to_bin 2 slang_vertex_builtin.gc slang_vertex_builtin_gc.h
 
