$NetBSD: patch-aa,v 1.4 1999/01/05 21:37:55 frueauf Exp $

--- Imakefile.orig	Thu Jul  2 19:37:09 1998
+++ Imakefile	Tue Jan  5 21:40:08 1999
@@ -40,7 +40,8 @@
 
 #ifdef USEJPEG
 #ifdef USEINSTALLEDJPEG
-JPEGLIBDIR = /usr/local/lib
+JPEGLIBDIR = $(LOCALBASE)/lib
+JPEGINCDIR = -I$(LOCALBASE)/include
 #else
 JPEGLIBDIR = ../jpeg
 #endif
@@ -54,7 +55,7 @@
 XCOMM Uncomment the following definition for XAWLIB if you want to use
 XCOMM the 3d Athena Widget Set (highly recommended!)
 
-XCOMM XAWLIB = -lXaw3d
+XAWLIB = -lXaw3d
 
 XCOMM Uncomment the following if needed for DECstations running older X11R4
 XCOMM INCROOT=/usr/include/mit
@@ -70,12 +71,12 @@
 XCOMM Change XPMLIBS if necessary to point to the xpm library (libXpm)
 XCOMM Change XPMINC if necessary to point to the include file for xpm (xpm.h)
 
-XCOMM #define USEXPM
-XCOMM #define USEXPM_ICON
+#define USEXPM
+#define USEXPM_ICON
 
 #ifdef USEXPM
 XPMLIBDIR = $(USRLIBDIR)
-XPMINC = -I$(INCDIR)
+XPMINC = -I$(INCDIR)/X11
 XPMLIBS = -L$(XPMLIBDIR) -lXpm
 #endif
 
@@ -101,7 +102,7 @@
 XCOMM inline functions. With the "INLINE" keyword, you should notice that
 XCOMM the display will be a bit faster in complex figures
 
-XCOMM USEINLINE = -DUSE_INLINE
+USEINLINE = -DUSE_INLINE
 
 XCOMM use (and change) the following if you want the multi-key data base file
 XCOMM somewhere other than the standard X11 library directory
@@ -110,6 +111,8 @@
 XCOMM use this if you want the multi-key data base file in the standard X11 tree
 XFIGLIBDIR = $(LIBDIR)/xfig
 
+XFIGDOCDIR = $(X11BASE)/share/doc/xfig
+
 XCOMM If your system doesn't have strstr undefine the following definition
 XCOMM HAVE_NO_NOSTRSTR = -DNOSTRSTR
 
@@ -169,8 +172,7 @@
 
 #ifdef USEJPEG
 #ifdef USEINSTALLEDJPEG
-JPEGINCDIR = -I/usr/include/X11
-JPEGLIB = -L$(JPEGLIBDIR) -ljpeg
+JPEGLIB = -Wl,-R$(JPEGLIBDIR) -L$(JPEGLIBDIR) -ljpeg
 #else
 JPEGCONF = configure
 JPEGINCDIR = -I$(JPEGLIBDIR)
@@ -185,7 +187,7 @@
 I18N_OBJ = w_i18n.o
 #endif
 
-DIR_DEFS=		-DXFIGLIBDIR=\"$(XFIGLIBDIR)\"
+DIR_DEFS=		-DXFIGLIBDIR=\"$(XFIGLIBDIR)\" -DXFIGDOCDIR=\"$(XFIGDOCDIR)\"
 
 XCOMM location of Fig object libraries
 OBJLIBDIR =		$(XFIGLIBDIR)/Libraries
@@ -314,22 +316,23 @@
 
 XCOMM Install the object libraries here
 install::
-	@echo Copying PDF documentation to $(XFIGLIBDIR)
+	@echo Copying PDF documentation to $(XFIGDOCDIR)
 	@(cd Doc ; \
-	$(INSTALL) -c xfig-howto.pdf $(XFIGLIBDIR) ; \
-	$(INSTALL) -c xfig.pdf $(XFIGLIBDIR) ; \
-	echo Copying html files to $(XFIGLIBDIR)/html ; \
-	if [ -d $(XFIGLIBDIR)/html ]; then set +x; \
-	   else (set -x; $(MKDIRHIER) $(XFIGLIBDIR)/html ); fi ; \
-	(cd html ; $(INSTALL) -c *.* $(XFIGLIBDIR)/html ; ) ;\
+	/bin/mkdir -p $(XFIGDOCDIR); \
+	$(INSTALL) -c xfig-howto.pdf $(XFIGDOCDIR) ; \
+	$(INSTALL) -c xfig.pdf $(XFIGDOCDIR) ; \
+	echo Copying html files to $(XFIGDOCDIR)/html ; \
+	if [ -d $(XFIGDOCDIR)/html ]; then set +x; \
+	   else (set -x; $(MKDIRHIER) $(XFIGDOCDIR)/html ); fi ; \
+	(cd html ; $(INSTALL) -c *.* $(XFIGDOCDIR)/html ; ) ;\
 	echo "  Copying japanese html files" ; \
-	if [ -d $(XFIGLIBDIR)/html/japanese ]; then set +x; \
-	   else (set -x; $(MKDIRHIER) $(XFIGLIBDIR)/html/japanese ); fi ; \
-	(cd html/japanese ; $(INSTALL) -c * $(XFIGLIBDIR)/html/japanese ; ) ; \
+	if [ -d $(XFIGDOCDIR)/html/japanese ]; then set +x; \
+	   else (set -x; $(MKDIRHIER) $(XFIGDOCDIR)/html/japanese ); fi ; \
+	(cd html/japanese ; $(INSTALL) -c * $(XFIGDOCDIR)/html/japanese ; ) ; \
 	echo "  Copying image files for html" ; \
-	if [ -d $(XFIGLIBDIR)/html/images ]; then set +x; \
-	   else (set -x; $(MKDIRHIER) $(XFIGLIBDIR)/html/images ); fi ; \
-	(cd html/images ; $(INSTALL) -c * $(XFIGLIBDIR)/html/images ; ) ; \
+	if [ -d $(XFIGDOCDIR)/html/images ]; then set +x; \
+	   else (set -x; $(MKDIRHIER) $(XFIGDOCDIR)/html/images ); fi ; \
+	(cd html/images ; $(INSTALL) -c * $(XFIGDOCDIR)/html/images ; ) ; \
 	) ;
 	@echo "Copying Fig Object Libraries"
 	@(cd Examples/Libraries ; \
