$NetBSD: patch-ad,v 1.1.1.1 2003/04/11 17:07:23 cjep Exp $

--- nettestd.c.orig	1992-11-05 21:52:58.000000000 +0000
+++ nettestd.c
@@ -107,7 +107,8 @@ union {
 } name;
 int namesize;
 
-int read(), recv();
+int read();
+ssize_t recv();
 int (*rfunc)() = read;
 
 main(argc, argv)
@@ -271,7 +272,11 @@ char **argv;
 # endif
 #endif
 	if (daemon) {
+#ifdef NONVOID_SETPGRP
+		if (setpgrp(0, getpid()) < 0)
+#else
 		if (setpgrp() < 0)
+#endif
 			perror("setpgrp");
 		if ((c = open(_PATH_TTY, O_RDWR)) >= 0) {
 			(void)ioctl(c, TIOCNOTTY, (char *)0);
@@ -416,7 +421,7 @@ char **argv;
 			    )
 			error("setsockopt (IP_OPTIONS)");
 #endif
-		if (bind(s, (char *)&name, namesize) < 0) {
+		if (bind(s, (struct sockaddr *)&name, namesize) < 0) {
 			error("bind");
 			exit(1);
 		}
@@ -447,10 +452,10 @@ register int s;
 #endif
 	listen(s, 5);
 
-	signal(SIGCHLD, dochild);
+	signal(SIGCHLD, (void *)dochild);
 	for (;;) {
 		namesize = sizeof(name);
-		s2 = accept(s, (char *)&name, &namesize);
+		s2 = accept(s, (struct sockaddr *)&name, &namesize);
 		if (s2 < 0) {
 			extern int errno;
 			if (errno == EINTR)
@@ -723,7 +728,7 @@ int s;
 #endif
 		{
 			namesize = sizeof(name.d_inet);
-			t = recvfrom(s, data, MAXSIZE, 0, (char *)&name.d_inet,
+			t = recvfrom(s, data, MAXSIZE, 0, (struct sockaddr *)&name.d_inet,
 				 &namesize);
 		}
 		if (t < 0) {
